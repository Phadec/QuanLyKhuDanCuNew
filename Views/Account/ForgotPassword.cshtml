@model QuanLyKhuDanCu.ViewModels.ForgotPasswordViewModel

@{
    ViewData["Title"] = "Quên mật khẩu";
    Layout = "_LayoutLogin";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-5">
            <div class="login-logo">
                <img src="~/images/logo.png" alt="Logo Khu Dân Cư" onerror="this.src='data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22100%22%20height%3D%22100%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2080%2080%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22grad%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%22100%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20style%3D%22stop-color%3A%231a4a73%3Bstop-opacity%3A1%22%20%2F%3E%3Cstop%20offset%3D%22100%25%22%20style%3D%22stop-color%3A%233498db%3Bstop-opacity%3A1%22%20%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20fill%3D%22url%28%23grad%29%22%20d%3D%22M40%2038.5l-18%2011.2V34.2L40%2023l18%2011.2v15.5z%22%2F%3E%3Cpath%20fill%3D%22%232980b9%22%20d%3D%22M40%2057l-18-11.2L40%2034.6l18%2011.2z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E';" />
                <h2 class="brand-text">Quản Lý Khu Dân Cư</h2>
            </div>
            <div class="card shadow-lg border-0 rounded-lg">
                <div class="card-header">
                    <h3 class="text-center font-weight-light">Khôi phục mật khẩu</h3>
                </div>
                <div class="card-body">
                    @if (ViewBag.EmailSent != null && ViewBag.EmailSent)
                    {
                        <div class="alert alert-success" role="alert">
                            <h4 class="alert-heading"><i class="fas fa-check-circle me-2"></i>Đã gửi email!</h4>
                            <p>Hướng dẫn khôi phục mật khẩu đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra hòm thư và làm theo hướng dẫn.</p>
                            <hr>
                            <p class="mb-0">Nếu không nhận được email, vui lòng kiểm tra thư mục spam hoặc thử lại sau.</p>
                        </div>
                        <div class="text-center mt-4">
                            <a href="/Account/Login" class="btn btn-primary">
                                <i class="fas fa-arrow-left me-2"></i> Quay lại đăng nhập
                            </a>
                        </div>
                    }
                    else
                    {
                        <div class="mb-4 text-center">
                            <p class="lead"><i class="fas fa-info-circle me-1"></i> Nhập địa chỉ email được liên kết với tài khoản của bạn</p>
                        </div>
                        <form asp-controller="Account" asp-action="ForgotPassword" method="post">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <div class="form-floating mb-3">
                                <input asp-for="Email" class="form-control" id="inputEmail" placeholder="name@example.com" />
                                <label asp-for="Email" for="inputEmail"><i class="fas fa-envelope me-2"></i>Email</label>
                                <span asp-validation-for="Email" class="field-validation-error"></span>
                            </div>
                            <div class="d-grid gap-2 mt-4">
                                <button type="submit" class="btn btn-primary py-3">
                                    <i class="fas fa-paper-plane me-2"></i> Gửi hướng dẫn khôi phục
                                </button>
                            </div>
                        </form>
                    }
                </div>
                <div class="card-footer text-center py-3">
                    <div class="small">
                        <a href="/Account/Login" class="btn-link">
                            <i class="fas fa-arrow-left me-1"></i> Quay lại đăng nhập
                        </a>
                    </div>
                </div>
            </div>
            <div class="text-center mt-3 text-white">
                <small>Bản quyền &copy; Quản lý khu dân cư @DateTime.Now.Year</small>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
